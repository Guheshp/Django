{% extends 'acc/base.html'%}
{% block content%}

<div class="container ">
    <div class="row">
      <p>{{ invoice }}</p>
        
        <div class="col-lg-12 mx-auto">
            <div class="card rounded shadow border-0">
                <div class="card-body rounded">
              <h3 class="m-3">Booking Lists</h3>
            <div class="table-responsive">
              <table id="example" style="width:100%" class="table  table-bordered">
                <thead>
                  <tr>
                    <th class="text-light">Invoice.no</th>
                    <!-- <th class="text-light">Groomname</th> -->
                    <th class="text-light">Client Name</th>
                    <th class="text-light">Phone Number</th>
                    <th class="text-light">Advance Paid</th>
                    <th class="text-light">Balance</th>
                    <th class="text-light">Total Amount</th>
                    <th class="text-light">Status</th>
                    <th class="text-light">Details</th>
                    <th class="text-light">update</th>
                  </tr>
                </thead>
                <tbody>
                {% for invoice in  invoices %}
                
                <tr>
                    <td class="text-color text-center">{{invoice.invoice_number}}</td>
                    <td class=" text-color text-center">{{ invoice.enquiry.name }}</td>
                    <td class=" text-color text-center">{{ invoice.enquiry.phone_number }}</td>
                    <!-- <td class="text-color">{{ invoice.bridename }}</td> -->
                    <!-- <td>
                        <ul>
                            {% for date in invoice.enquiry.dates.all %}
                            <li class="text-color list-unstyled m-0">{{ date }}</li>
                            {% endfor %}
                        </ul>
                    </td> -->

                    <td class="text-color text-center"> <i class="fa-solid fa-indian-rupee-sign"></i>&nbsp;{{invoice.advance_amt}}</td>
                    <td class="text-color text-center"><i class="fa-solid fa-indian-rupee-sign"></i>&nbsp;{{invoice.get_balance}}</td>
                    <td class="text-color text-center"><i class="fa-solid fa-indian-rupee-sign"></i>&nbsp;{{invoice.venue.price}}</td>

                    {% if invoice.status%}
                    <td><a class="link-success text-center link-offset-3 link-underline-opacity-25 link-underline-opacity-100-hover" href="#">Payment Completed<i class="fa-solid fa-check"></i></a></td>
                    {% else %}
                    <td class="text-danger">Pending</td>
                    {% endif %}


                    <!-- <td class="text-color"><i class="fa-solid fa-indian-rupee-sign"></i>&nbsp;{{invoice.get_balance|floatformat:2}}</td> -->

                    <td>
                      {% if invoice.enquiry and invoice.venue %}
                          <a href="{% url 'enquiry_venue_payment_history' enquiry_id=invoice.enquiry.id venue_id=invoice.venue.id %}">Details</a>
                      {% else %}
                          No associated enquiry or venue
                      {% endif %}
                  </td>

                    <td><a class="text- link-offset-3 link-underline-opacity-25" href="{% url 'update_payment' invoice.id%}">Payment</a></td>
                    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                      Launch demo modal
                    </button> -->
                    
                   

                    <!-- Modal ends -->

                    
                  </tr>
                  {% endfor %}

                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
{%  endblock %}